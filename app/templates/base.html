<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>{% block title %}Flask RBAC Shop{% endblock %}</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.datatables.net/2.0.8/css/dataTables.bootstrap5.css" rel="stylesheet"/>
	<link href="{{ url_for('static', filename='css/app.css') }}" rel="stylesheet">
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<div class="container-fluid">
			<a class="navbar-brand" href="/">RBAC Shop</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav me-auto">
					{% if current_user.is_authenticated %}
						{% if current_user.is_admin %}
							<li class="nav-item"><a class="nav-link" href="{{ url_for('admin.dashboard') }}">Admin</a></li>
							<li class="nav-item"><a class="nav-link" href="{{ url_for('admin.users') }}">Users</a></li>
							<li class="nav-item"><a class="nav-link" href="{{ url_for('admin.products') }}">All Products</a></li>
						{% else %}
							<li class="nav-item"><a class="nav-link" href="{{ url_for('catalog.user_dashboard') }}">My Dashboard</a></li>
							<li class="nav-item"><a class="nav-link" href="{{ url_for('catalog.products_list') }}">My Products</a></li>
						{% endif %}
						<li class="nav-item"><a class="nav-link" href="{{ url_for('catalog.categories_list') }}">Categories</a></li>
						<li class="nav-item"><a class="nav-link" href="{{ url_for('catalog.brands_list') }}">Brands</a></li>
					{% endif %}
				</ul>
				<ul class="navbar-nav">
					{% if current_user.is_authenticated %}
					<li class="nav-item"><span class="navbar-text me-2">{{ current_user.get_full_name() }}</span></li>
					<li class="nav-item">
						<form method="post" action="{{ url_for('auth.logout') }}">
							<button class="btn btn-outline-light btn-sm" type="submit">Logout</button>
						</form>
					</li>
					{% endif %}
				</ul>
			</div>
		</div>
	</nav>
	<main class="container py-4">
		{% with messages = get_flashed_messages(with_categories=true) %}
			{% if messages %}
				{% for category, message in messages %}
					<div class="alert alert-{{ category }}">{{ message }}</div>
				{% endfor %}
			{% endif %}
		{% endwith %}
		{% block content %}{% endblock %}
	</main>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script src="https://cdn.datatables.net/2.0.8/js/dataTables.js"></script>
	<script src="https://cdn.datatables.net/2.0.8/js/dataTables.bootstrap5.js"></script>
	<script src="{{ url_for('static', filename='js/app.js') }}"></script>
	{% block scripts %}{% endblock %}
</body>
</html>
